Table users {
  id serial [pk, increment]
}

Table teams {
  id serial [pk, increment]
  project_id integer [ref: > projects.id] 
}

Table projects {
  id serial [pk, increment]
}

Table artifact_categories {
  id serial [pk, increment]
  slug varchar(50) [unique] 
  name varchar(100) 
  description text
  icon varchar(50) 
}

Table artifacts {
  id serial [pk, increment]
  root_artifact_id integer [ref: > artifacts.id] // tracks the original artifact across all versions
  parent_version_id integer [ref: > artifacts.id] // tracks the immediate parent version for lineage
  
  title varchar(255) [not null]
  description text
  category_id integer [ref: > artifact_categories.id]
  
  author_id integer [ref: > users.id]
  file_size bigint 
  file_path varchar(500) 
  
  date_created timestamp [default: `now()`]
  last_updated timestamp [default: `now()`]
  
  downloads integer [default: 0]
  views integer [default: 0]
  
  license varchar(50)
  
  version_number varchar(50) [not null]
  version_type varchar(20) // 'original', 'fork', 'update', 'collaborative'
  
  is_current boolean [default: false]
  
  status varchar(20) // 'draft', 'published', 'archived'
}

Table artifact_version_changes {
  id serial [pk, increment]
  artifact_id integer [ref: > artifacts.id]
  user_id integer [ref: > users.id]
  
  change_type varchar(50) // 'title', 'description', 'file'
  old_value text
  new_value text
  
  changed_at timestamp [default: `now()`]
  change_description text
}

Table news {
  id serial [pk, increment]
}

Table notifications {
  id serial [pk, increment]
  news_id integer [ref: > news.id]
}

Table u_to_t {
  user_id integer [ref: > users.id]
  team_id integer [ref: > teams.id]
}

Table a_to_p {
  artifact_id integer [ref: > artifacts.id]
  project_id integer [ref: > projects.id]
  added_at timestamp [default: `now()`]
}

Table a_to_t {
  artifact_id integer [ref: > artifacts.id]
  team_id integer [ref: > teams.id]
  added_at timestamp [default: `now()`]
}

Table artifact_tags {
  id serial [pk, increment]
  name varchar(50) [unique]
  description text
}

Table a_to_tags {
  artifact_id integer [ref: > artifacts.id]
  tag_id integer [ref: > artifact_tags.id]
  added_at timestamp [default: `now()`]
}

Table n_to_u {
  notification_id integer [ref: > notifications.id]
  user_id integer [ref: > users.id]
}